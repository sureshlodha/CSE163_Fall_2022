<!DOCTYPE html>
<html>
<head>
    <!-- Meta Tag -->
    <meta charset="utf-8">
    <meta name="viewport"content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <title>Close Elections</title>

     <!--  CSS Stylesheet  -->
    <link rel="stylesheet" type = "text/css" href="CloseElectionsStyle.css"/>
    
    <!-- Roboto+Slab -->
    <!--  Google Fonts  -->
    <link href="https://fonts.googleapis.com/css?family=Cormorant+Garamond" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

    <!--  d3.js v5 import  -->
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.js"></script>

    <!--  Bootstrap import  -->
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!--  Custom Stylesheet  -->
    <link href="CloseElectionsStyle.css" rel="stylesheet" />
    
    <!-- Javascript -->  
    <!--<script type="text/javascript" src="CloseElections.js"></script> -->

</head>

<body>
    
    <div id="main" style="width:1545px; margin:0 auto;">

        <!-- Title -->
        <h1>Close House Elections</h1>

        <!-- Intro blurb-->
        <div class id = blurb>
            <p> From the years 2010 to 2020, 2016 had the least (16) close elections and 2018 had the most (44). 
                Texas District 23 consistently fell into the close election category, ranging from a vote margin of 4.95% in 2010 to only 0.44% in 2018. Democrats won 53.5% of close elections in this time frame, while Republicans only won 46.5%.
                Although Republicans won more House seats over the course of 2010 to 2016, Democrats won more close elections.
            </p>
        </div>
        <hr>

        </p>

        <!--<br>-->

        <!-- Row to handle graph and filters -->
        <div class="row">

            <!-- Left sidebar (Static Tooltip) -->
            <div class="col-md-3">
                <!-- Static Tooltip -->
                <div class="static-tooltip">
                    <div id="static-title" style="float: center;text-align: center;font-size: 16pt"> </div>
                    <div id="static-data" style="float: left;text-align: left;font-size: 12pt"> </div>
                </div>
            </div>

            <!-- Middle Column -->
            <div class="col-md-8">

                <!-- Display graph here -->
                <div class="row" id="display" style="height=600px"></div>

                <!--Spacer Row
                <div class="row"><br></div>-->


            <!-- Sidebar for filters and toggles and tooltip (?) -->
            <div class="col-md-1" id="sidebar">

        <!--<br>-->
                
                    

                       
                           
                    </div>
                </div>
            </div>
                

       
    <!-- Middle Column: putting map here -->
    <div class="col-md-8">
        <svg id = "legend" align="center"></svg>
        <div> </div>
        <button id="close" onclick="ChangeDisplay(true)">Close Only</button>
        <script type="text/javascript" src="CloseElections.js"></script>
        <!-- Slider stuff -->
            <script src="https://unpkg.com/d3-simple-slider"></script>

        <div class="col-md-3">
            <!-- Slider stuff
            <script src="https://unpkg.com/d3-simple-slider"></script>-->
        </div>
    
    </div>
        <!-- Slider stuff 
        <script src="https://unpkg.com/d3-simple-slider"></script>-->

        <link
            rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
            integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
            crossorigin="anonymous"
        />
    
        <div class="container">
            <div class="row align-items-center">
                <div class="col-sm-2"><p id="value-time"></p></div>
                <div class="col-sm"><div id="slider-time"></div></div>
            </div>
        </div>    

        <script>
  // Time
  var dataTime = d3.range(0, 11, 2).map(function(d) {
    return new Date(2010 + d, 10, 3);
  });
            
  var sliderTime = d3
    .sliderBottom()
    .min(d3.min(dataTime))
    .max(d3.max(dataTime))
    .step(1000 * 60 * 60 * 24 * 365)
    .width(300)
    .tickFormat(d3.timeFormat('%Y'))
    .tickValues(dataTime)
    .default(new Date(2010, 10, 3))
    .on('onchange', val => {
        //console.log(d3.timeFormat('%Y')(val));
        var x = d3.timeFormat('%Y')(val);
        if(x % 2 != 0) {
            x--;
        }
        //d3.select('p#value-time').text(d3.timeFormat('%Y')(val));
        if (x != year1) {
           year1 = x;
           ChangeYear();
           previous_year = year1;
           //ChangeDisplay(false); 
        }
    });

  var gTime = d3
    .select('div#slider-time')
    .append('svg')
    .attr('width', 500)
    .attr('height', 100)
    .append('g')
    .attr('transform', 'translate(30,30)');

  gTime.call(sliderTime);

  //d3.select('p#value-time').text(d3.timeFormat('%Y')(sliderTime.value()));
</script>
    
        <div id = "footer">
        <div class = footerWidth>
            <hr>
            <!-- Group Members  -->
            <div class="group_members">
                <h3 class="sources_header" style="line-height: 10px; font-size: 15px; width: 99.99%">
                    Group Members</h3>

                <ul class="list-unstyled" style="text-align: center">
                    <li>Jackson Nadler-Block (jnadlerb@ucsc.edu)</li>
                    <li>Angel Aguirre (aaguirre@ucsc.edu)</li>
                    <li>Caitlin Ramayrat (cramayra@ucsc.edu)</li>
                    <li>Radhika Sinha (rasinha@ucsc.edu)</li>

                </ul>

                <p style="text-align: center; font-size: 14px">In collaboration with Suresh K. Lodha, Omkar Ghanekar, and Jacob Low</p>

            <p style="text-align: center; line-height: 8px; font-size: 14px">Site is hosted on GitHub Pages <a href="https://jnadler-block.github.io/CSE-163/">here</a>. </p>
        </div>

        <!-- Designed For -->
        <div class="group_members">
            <h3 class="sources_header" style="line-height: 20px; font-size: 15px; width: 99.9%">
            <p style="text-align: center">CSE 163: Data Programming for Visualization, Fall 2022</p>
        </div>

        <!-- Resources -->
        <div class="row" id="sources">
            <div class="col-md-3 ">
                <h4 class="sources_header" style="text-align: center; font-size: 15px">Files</h4>
                <ul class="sources_list">
                    <li><a href="https://jnadler-block.github.io/CSE-163/">GitHub Repository Link</a></li>
                    <li>index.html</li>
                    <li>CloseElections.js</li>
                    <li>CloseElectionsStyle.css</li>
                    <li>HouseElectionResults.csv</li>
                    <li>USDistricts2010.json</li>
                    <li>USDistricts2012.json</li>
                </ul>
            </div>
            <div class="col-md-3">
                <h4 class="sources_header" style="text-align: center">Visual Sources</h4>
                <ul class="sources_list">
                    <li><a href="https://sureshlodha.github.io/CMPS165_Spring2018/FinalProjects/CaliforniaHousePlants/graph">California Houseplants</a></li>
                </ul>
            </div>
            <div class="col-md-3">
                <h4 class="sources_header" style="text-align: center">Code Sources</h4>
                <ul class="sources_list">
                    <li><a href="https://bl.ocks.org/johnwalley/e1d256b81e51da68f7feb632a53c3518">Slider</a></li>
                    <li><a href="https://d3-legend.susielu.com/#color">Legend</a></li>
                </ul>
            </div>
            <div class="col-md-3">
                <h4 class="sources_header" style="text-align: center">Data Sources</h4>
                <ul class="sources_list">
                    <li><a href="https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/IG0UN2">US House Data</a></li>
                    <li><a href="https://eric.clst.org/tech/usgeojson/">2010 GeoJSON</a></li>
                    <li><a href="https://github.com/unitedstates/districts/tree/gh-pages/states">2012-2020 GeoJSON</a></li>
                </ul>
            </div>
        </div>
        </div>
    <hr>
    </div>
    <br><br><br><br><br><br><br><br><br>
</body>
</html>